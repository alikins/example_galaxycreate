{
    "collection_readme": {
        "name": "README.md",
        "html": "<h1>Ansible Collection - nginx.nginx_controller</h1>\n<p>This collection contains all the roles maintained to support NGINX Controller 3.0 and later.</p>\n<p>It includes:</p>\n<ul>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_install\">nginxinc.nginx_controller_install</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_license\">nginxinc.nginx_controller_license</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_generate_token\">nginxinc.nginx_controller_generate_token</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_agent\">nginxinc.nginx_controller_agent</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_certificate\">nginxinc.nginx_controller_certificate</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_gateway\">nginxinc.nginx_controller_gateway</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_application\">nginxinc.nginx_controller_application</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx_controller_component\">nginxinc.nginx_controller_component</a></li>\n<li><a href=\"https://galaxy.ansible.com/nginxinc/nginx\">nginxinc.nginx</a></li>\n</ul>\n<h2>Use guidelines</h2>\n<p>Install this collection locally:</p>\n<p>ansible-galaxy collection install nginxinc.nginx_controller -p ./collections</p>\n<p>Then you can use the roles from the collection in your playbooks / plays:</p>\n<pre><code>---\n- hosts: nginx_instances\n\n    collections:\n    - nginxinc.nginx_controller\n\n    roles:\n    - role: nginx\n        vars:\n        nginx_enable: true\n        nginx_start: true\n        nginx_type: plus\n\n    - role: nginx_controller_generate_token\n        vars:\n          nginx_controller_fqdn: controller.example.local\n          nginx_controller_user_email: user@example.local\n          nginx_controller_user_password: Secur3P@ssw0rd\n\n    - role: nginx_controller_agent\n        vars:\n          nginx_controller_fqdn: controller.example.local\n</code></pre>\n\n<blockquote>\n<p>It is possible to be more explicit. For example a fully-qualified role name such as <code>nginxinc.nginx_controller.nginx</code> instead of <code>nginx</code> is helpful if you maintain a different <code>nginx</code> role on your local workstation at a different local path.</p>\n</blockquote>\n<p>Reference the Collection at the start of a playbook:</p>\n<pre><code>---\n- hosts: localhost\n  gather_facts: no\n  collections:\n  - nginxinc.nginx_controller\n\n  tasks:\n  - name: load the vars.yaml \n    include_vars: &quot;{{ playbook_dir }}/vars.yaml&quot;\n</code></pre>\n\n<p>Using requirements.yaml</p>\n<p>/collections/requirements.yml</p>\n<pre><code>---\ncollections:\n- name: nginxinc.nginx_controller\n  #version: 3.3.1\n</code></pre>\n\n<h2>Author</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p><a href=\"https://github.com/aknot242\">Daniel Edgar</a></p>"
    },
    "documentation_files": [],
    "contents": [
        {
            "content_name": "nginx_controller_license",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller License</h1>\n<p>A role to push an NGINX Controller license to your NGINX Controller platform.</p>\n<h2>Requirements</h2>\n<ul>\n<li><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a></li>\n<li><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a> license file</li>\n</ul>\n<h2>Role Variables</h2>\n<p>-- All the below variables are required --</p>\n<p><code>nginx_controller_license</code> - A base64 encoded string of your NGINX Controller license file. Has to be one line, with no line endings or carriage returns. The below example uses the b64encode filter to do this encoding. </p>\n<p><code>nginx_controller_fqdn</code> - The FQDN / hostname of your Controller server.</p>\n<p><code>nginx_controller_auth_token</code> - Authentication token for NGINX Controller. You can use the <code>nginxinc.nginx_controller_generate_token</code> role to set this variable.</p>\n<h2>Dependencies</h2>\n<p>none</p>\n<h2>Example Playbook</h2>\n<p>To use this role you can create a playbook such as the following:</p>\n<pre><code>- hosts: localhost\n  gather_facts: no\n\n  vars:\n    nginx_controller_user_email: &quot;user@example.com&quot;\n    nginx_controller_user_password: &quot;mySecurePassword&quot;\n    nginx_controller_fqdn: &quot;controller.mydomain.com&quot;\n    nginx_controller_validate_certs: false\n\n  tasks:\n    - name: Retrieve the NGINX Controller auth token\n      include_role:\n        name: nginxinc.nginx_controller_generate_token\n\n    - name: Push the NGINX Controller license to your instance\n      include_role:\n        name: nginxinc.nginx_controller_license\n      vars:\n        # controller.auth_token: output by previous role in example\n        nginx_controller_license: &quot;{{ lookup('file', 'license/controller_license.txt') | b64encode }}&quot;\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_license.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_license.yaml -e \"nginx_controller_user_email=user@company.com nginx_controller_user_password=notsecure nginx_controller_fqdn=controller.example.local nginx_controller_validate_certs=false\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_component.yaml -e \"@nginx_controller_license_vars.yaml\"</code></p>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p><a href=\"https://github.com/alessfg\">Alessandro Fael Garcia</a></p>\n<p><a href=\"https://github.com/aknot242\">Daniel Edgar</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2020</p>"
        },
        {
            "content_name": "nginx_controller_install",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller Install Ansible Role</h1>\n<p>This role installs <a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a>.</p>\n<h2>Requirements</h2>\n<ul>\n<li>Controller tarball file from the <a href=\"https://cs.nginx.com/login\">NGINX Customer Portal</a>.</li>\n</ul>\n<p>For the installation script to work:</p>\n<ul>\n<li>Supported operating systems: Ubuntu, Debian, Centos, Red Hat Enterprise Linux</li>\n<li>Postgres 9.5 with user credentials and permissions to allow creation of databases, write, read.</li>\n<li>BASH &gt;= 4.0</li>\n<li>Docker Community Edition 18.09.0 or later  (installer with install for you if missing)</li>\n<li>Kubernetes 1.15.5  (recommend allowing installer to install Kubernetes for you)</li>\n<li>Installed following CLI tools on the Controller remote node:</li>\n<li>curl or wget, jq, envsubst (provided by the gettext package)</li>\n<li>awk, bash (4.0 or later), getent, grep, gunzip (provided by the gzip package), less, openssl, sed, tar</li>\n<li>\n<p>base64, basename, cat, dirname, head, id, mkdir, numfmt, sort, tee (all provided by the coreutils package)</p>\n</li>\n<li>\n<p>the full prerequisites can be reviewed <a href=\"https://docs.nginx.com/nginx-controller/admin-guide/installing-nginx-controller/\">here</a></p>\n</li>\n</ul>\n<h2>Role Variables</h2>\n<table>\n<thead>\n<tr>\n<th>Variable</th>\n<th>Default</th>\n<th>Description</th>\n<th>Required</th>\n</tr>\n</thead>\n\n<tr>\n<td><code>nginx_controller_tarball</code></td>\n<td><code>\"\"</code></td>\n<td>Source path to the Controller tarball file on the remote host.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_install_path</code></td>\n<td><code>\"\"</code></td>\n<td>Path where the tarball is extracted on the remote host.</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_remote_source</code></td>\n<td><code>\"true\"</code></td>\n<td>If the tarball file exists on the remote machine.</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_db_host</code></td>\n<td><code>\"\"</code></td>\n<td>PostgreSQL database host ip address or FQDN.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_db_port</code></td>\n<td><code>\"5432\"</code></td>\n<td>PostgreSQL database port.</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_db_user</code></td>\n<td><code>\"\"</code></td>\n<td>PostgreSQL database user.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_db_password</code></td>\n<td><code>\"\"</code></td>\n<td>PostgreSQL database password.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_apigw_cert</code></td>\n<td><code>\"\"</code></td>\n<td>SSL/TLS cert file path, cannot be used together with self_signed_cert: true.</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_apigw_key</code></td>\n<td><code>\"\"</code></td>\n<td>SSL/TLS key file path, cannot be used together with self_signed_cert: true.</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_tsdb_volume_type</code></td>\n<td><code>\"\"</code></td>\n<td>Backing volume for time series database. (local, nfs or aws)</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_tsdb_nfs_path</code></td>\n<td><code>\"\"</code></td>\n<td>Time series database NFS path (only if <code>tsdb_volume_type</code> is <code>nfs</code>)</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_tsdb_nfs_host</code></td>\n<td><code>\"\"</code></td>\n<td>Time series database NFS host (only if <code>tsdb_volume_type</code> is <code>nfs</code>)</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_tsdb_aws_volume_id</code></td>\n<td><code>\"\"</code></td>\n<td>Time series database AWS EBS Volume ID (only if <code>tsdb_volume_type</code> is <code>aws</code>)</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_smtp_host</code></td>\n<td><code>\"\"</code></td>\n<td>SMTP Host for emails.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_smtp_port</code></td>\n<td><code>\"25\"</code></td>\n<td>SMTP Port for emails.</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_smtp_authentication</code></td>\n<td><code>\"\"</code></td>\n<td>Specify if SMTP needs auth (true or false).</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_smtp_user</code></td>\n<td><code>\"\"</code></td>\n<td>SMTP user (only provide if <code>smtp_authentication</code> is true).</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_smtp_password</code></td>\n<td><code>\"\"</code></td>\n<td>SMTP password (only provide if <code>smtp_authentication</code> is true).</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_smtp_use_tls</code></td>\n<td><code>false</code></td>\n<td>Specify if SMTP should use https (true or false)</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_noreply_address</code></td>\n<td><code>\"\"</code></td>\n<td>Specify the email to show in the 'FROM' field of controller emails.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_fqdn</code></td>\n<td><code>\"\"</code></td>\n<td>FQDN for the controller web frontend and agent communication. For example, controller.example.com. This domain name must not exceed 64 characters.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_organization_name</code></td>\n<td><code>\"\"</code></td>\n<td>The organization name.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_admin_firstname</code></td>\n<td><code>\"\"</code></td>\n<td>Admin user first name.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_admin_lastname</code></td>\n<td><code>\"\"</code></td>\n<td>Admin user last name.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_admin_email</code></td>\n<td><code>\"\"</code></td>\n<td>Admin user email.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_admin_password</code></td>\n<td><code>\"\"</code></td>\n<td>Admin user password.</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td><code>nginx_controller_self_signed_cert</code></td>\n<td><code>false</code></td>\n<td>Specify if the installation should create a self signed cert for TLS (true or false).</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_overwrite_existing_configs</code></td>\n<td><code>false</code></td>\n<td>Specify if the existing config for controller should be overwritten (true or false).</td>\n<td>No</td>\n</tr>\n<tr>\n<td><code>nginx_controller_auto_install_docker</code></td>\n<td><code>false</code></td>\n<td>Specify if docker needs to be installed as part of the installation process (true or false).</td>\n<td>No</td>\n</tr>\n\n</table>\n<h2>Dependencies</h2>\n<p>No dependencies.</p>\n<h2>Example Playbook</h2>\n<p>The following playbook example will use this role to install controller. Check the <a href=\"#role-variables\">variables</a> and set the values inside <code>&lt;</code>,<code>&gt;</code> accordingly.</p>\n<p>Installing Controller to a remote.\nexample is using Ubuntu 18.04</p>\n<pre><code>## on the Ansible host\n- hosts: localhost\n  gather_facts: false\n\n  tasks:\n  - name: generate password hash # https://askubuntu.com/questions/982804/mkpasswd-m-sha-512-produces-incorrect-login\n    expect:\n      echo: yes\n      command: /bin/bash -c &quot;mkpasswd --method=sha-512 | sed 's/\\$/\\\\$/g'&quot;\n      responses:\n        (?i)password: '&lt;some secure password&gt;'\n    register: password_hash\n\n## on the remote host\n- hosts: controller\n  remote_user: ubuntu\n  become: yes\n  become_method: sudo\n  gather_facts: yes\n\n  # supporting su requirement for Controller installer role\n  - name: set root password to support su for Controller installation with Ubuntu\n    user:\n      name: root\n      password: hostvars['localhost']['password_hash'].stdout_lines[1]\n\n  - name: copy the controller tar archive to the remote host\n    copy:\n      src: &quot;{{playbook_dir}}/{{nginx_controller_tarball}}&quot;\n      dest: &quot;{{ ansible_env.HOME }}/{{nginx_controller_tarball}}&quot;\n      owner: ubuntu\n      group: ubuntu\n      force: yes\n    vars:\n      nginx_controller_install_path: &quot;{{ ansible_env.HOME }}&quot;\n      nginx_controller_tarball: &quot;controller-installer-&lt;&gt;.tar.gz&quot;\n\n  - name:  make sure all the prerequisites are present on the remote\n    apt:\n      name: &quot;{{ packages }}&quot;\n      state: present\n      update_cache: yes\n    vars:\n      packages:\n      - gettext\n      - bash\n      - gzip\n      - coreutils\n      - grep\n      - less\n      - sed\n      - tar\n      - python-pexpect  # to support ansible\n      - nfs-common  # to support nfs remote volume\n    tags: packages\n\n## changing security context on the remote host to su to run the installer\n- name: install controller\n  remote_user: ubuntu\n  hosts: controller\n  become: yes\n  become_user: ubuntu\n  become_method: su  # note that the become method is required to be su, you will need to support that for your distribution.\n  gather_facts: false\n\n  roles:\n    - nginxinc.nginx_controller_install\n\n  vars:\n    - nginx_controller_tarball: &quot;{{ ansible_env.HOME }}/{{nginx_controller_tarball}}&quot;\n    - nginx_controller_install_path: /usr/ubuntu\n    - nginx_controller_db_host: dbhost.example.com\n    - nginx_controller_db_user: &quot;naas&quot;\n    - nginx_controller_db_password: ''\n    - nginx_controller_tsdb_volume_type: nfs\n    - nginx_controller_tsdb_nfs_path: &quot;/controllerdb&quot;\n    - nginx_controller_tsdb_nfs_host: storage.internal\n    - nginx_controller_smtp_host: &quot;localhost&quot;\n    - nginx_controller_smtp_authentication: false\n    - nginx_controller_smtp_use_tls: false\n    - nginx_controller_noreply_address: &quot;noreply@example.com&quot;\n    - nginx_controller_fqdn:  controller.example.com\n    - nginx_controller_organization_name: &quot;Example&quot;\n    - nginx_controller_admin_firstname: &quot;Firstname&quot;\n    - nginx_controller_admin_lastname: &quot;Lastname&quot;\n    - nginx_controller_admin_email: &quot;firstname@example.com&quot;\n    - nginx_controller_admin_password: ''\n    - nginx_controller_self_signed_cert: true\n    - nginx_controller_overwrite_existing_configs: true\n    - ansible_python_interpreter: /usr/bin/python3\n    - ansible_become_password: '&lt;some secure password&gt;'\n\n# pull the install log for review\n- hosts: controller\n  remote_user: ubuntu\n  become: yes\n  become_method: sudo\n  gather_facts: false\n\n  tasks:\n  - name: fetch the install log\n    fetch:\n      src: /var/log/nginx-controller/nginx-controller-install.log\n      dest: &quot;{{playbook_dir}}/logs/&quot;\n\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_install.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_install.yaml -e \"nginx_controller_admin_email=user@company.com nginx_controller_admin_password=notsecure nginx_controller_fqdn=controller.example.local\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_install.yaml -e \"@nginx_controller_install_vars.yaml\"</code></p>\n<h2>Troubleshooting</h2>\n<ul>\n<li>Check the installation logs in <code>/var/log/nginx-controller/nginx-controller-install.log</code> on the remote.  Above task example pulls those to the Ansible server.</li>\n</ul>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://www.f5.com/\">F5 Networks</a></p>"
        },
        {
            "content_name": "nginx_controller_generate_token",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller Generate Token</h1>\n<p>A role to generate and return an authentication token for NGINX Controller for use in other Roles or within a playbook.</p>\n<h2>Requirements</h2>\n<p><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a></p>\n<h2>Role Variables</h2>\n<p>-- All the below variables are required --</p>\n<p><code>nginx_controller_user_email</code> - The email address of the NGINX Controller user.</p>\n<p><code>nginx_controller_user_password</code> - The password that corresponds to the controller.user_email.</p>\n<p><code>nginx_controller_fqdn</code> - The DNS name of your NGINX Controller installation.</p>\n<p><code>nginx_controller_auth_token</code> - Variable returned by this Role and consumed by others to authenticate to the NGINX Controller API.</p>\n<h2>Dependencies</h2>\n<p>none</p>\n<h2>Example Playbook</h2>\n<p>To use this role you can create a playbook such as the following:</p>\n<pre><code>- hosts: localhost\n  gather_facts: no\n\n  tasks:\n    - name: Retrieve the NGINX Controller auth token\n      include_role:\n        name: nginxinc.nginx_controller_generate_token\n      vars:\n        nginx_controller_user_email: &quot;user@example.com&quot;\n        nginx_controller_user_password: &quot;mySecurePassword&quot;\n        nginx_controller_fqdn: &quot;controller.mydomain.com&quot;\n        nginx_controller_validate_certs: false\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_generate_token.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_generate_token.yaml -e \"nginx_controller_user_email=user@company.com nginx_controller_user_password=notsecure nginx_controller_fqdn=controller.example.local nginx_controller_validate_certs=false\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_generate_token.yaml -e \"@nginx_controller_token_vars.yaml\"</code></p>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p><a href=\"https://github.com/alessfg\">Alessandro Fael Garcia</a></p>\n<p><a href=\"https://github.com/aknot242\">Daniel Edgar</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2020</p>"
        },
        {
            "content_name": "nginx_controller_gateway",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller Gateway</h1>\n<p>Upsert (create and update) gateways in NGINX Controller to support ingress for Applications and Components.</p>\n<h2>Requirements</h2>\n<p><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a></p>\n<h2>Role Variables</h2>\n<h3>Required Variables</h3>\n<p><code>nginx_controller_fqdn</code> - FQDN of the NGINX Controller instance</p>\n<p><code>nginx_controller_auth_token</code> - Authentication token for NGINX Controller</p>\n<p><code>nginx_controller_environmentName</code> - Environment the gateway is associated with</p>\n<p><code>nginx_controller_gateway.metadata.name</code> - Name of the gateway</p>\n<p><code>nginx_controller_gateway.ingress.uris</code> - URI for the gateway to service</p>\n<p><code>nginx_controller_gateway.ingress.placement.instanceRefs</code> - Instance(s) this gateway configuration is applied to (these must exist first)</p>\n<h3>Template Variables</h3>\n<p>This role has multiple template related variables. The descriptions and defaults for all these variables can be found in <strong><a href=\"./vars/main.yml\">vars/main.yml</a></strong></p>\n<h2>Dependencies</h2>\n<h2>Example Playbook</h2>\n<p>To use this role you can create a playbook such as the following (let's name it <code>nginx_controller_gateway.yaml</code> for the purposes of this example).</p>\n<pre><code>- hosts: localhost\n  gather_facts: no\n\n  vars:\n    nginx_controller_user_email: &quot;user@example.com&quot;\n    nginx_controller_user_password: &quot;mySecurePassword&quot;\n    nginx_controller_fqdn: &quot;controller.mydomain.com&quot;\n    nginx_controller_validate_certs: false\n\n  tasks:\n    - name: Retrieve the NGINX Controller auth token\n      include_role:\n        name: nginxinc.nginx_controller_generate_token\n\n    - name: Create a gateway\n      include_role:\n        name: nginxinc.nginx_controller_gateway\n      vars:\n        # controller.auth_token: output by previous role in example\n        nginx_controller_environmentName: &quot;production-us-west&quot;\n        nginx_controller_gateway:\n          metadata:\n            name: lending\n            displayName: &quot;Shared Public Lending BU Gateway&quot;\n            description: &quot;Routes all non special Lending applications&quot;\n          desiredState:\n            ingress:\n              uris:\n                &quot;http://mortgage.acmefinancial.net&quot;:\n                  {}\n                &quot;https://mortgage.acmefinancial.net&quot;:\n                  {}\n                &quot;http://ratecalculator.acmefinancial.net&quot;:\n                  {}\n                &quot;https://ratecalculator.acmefinancial.net&quot;:\n                  {}\n              tls:\n                certRef:\n                  ref: &quot;/services/environments/lending-prod/certs/star.acmefinancial.net&quot;\n                protocols:\n                  - &quot;TLSv1.3&quot;\n                  - &quot;TLSv1.2&quot;\n              placement:\n                instanceRefs:\n                  - ref: &quot;/infrastructure/locations/unspecified/instances/2&quot;\n                  - ref: &quot;/infrastructure/locations/unspecified/instances/4&quot;\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_gateway.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_gateway.yaml -e \"nginx_controller_user_email=user@company.com nginx_controller_user_password=notsecure nginx_controller_fqdn=controller.example.local nginx_controller_validate_certs=false\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_gateway.yaml -e \"@nginx_controller_gateway_vars.yaml\"</code></p>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p><a href=\"https://github.com/alessfg\">Alessandro Fael Garcia</a></p>\n<p><a href=\"https://github.com/aknot242\">Daniel Edgar</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2020</p>"
        },
        {
            "content_name": "nginx_controller_component",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller Component</h1>\n<p>Define application components with NGINX Controller to create paths between the Gateway ingress and the upstream workload group(s).</p>\n<h2>Requirements</h2>\n<p><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a></p>\n<h2>Role Variables</h2>\n<h3>Required Variables</h3>\n<p><code>nginx_controller_fqdn</code> - FQDN of the NGINX Controller instance</p>\n<p><code>nginx_controller_auth_token</code> - Authentication token for NGINX Controller</p>\n<p><code>nginx_controller_environmentName</code> - Environment the component is associated with</p>\n<p><code>nginx_controller_appName</code> - Name of the app</p>\n<p><code>nginx_controller_component.metadata.name</code> -  Name of the component</p>\n<h3>Template Variables</h3>\n<p>This role has multiple template related variables. The descriptions and defaults for all these variables can be found in <strong><a href=\"./vars/main.yml\">vars/main.yml</a></strong></p>\n<h2>Dependencies</h2>\n<h2>Example Playbook</h2>\n<p>To use this role you can create a playbook such as the following (let's name it <code>nginx_controller_component.yaml</code> for the purposes of this example).</p>\n<pre><code>- hosts: localhost\n  gather_facts: no\n\n  vars:\n    nginx_controller_user_email: &quot;user@example.com&quot;\n    nginx_controller_user_password: &quot;mySecurePassword&quot;\n    nginx_controller_fqdn: &quot;controller.mydomain.com&quot;\n    nginx_controller_validate_certs: false\n\n  tasks:\n    - name: Retrieve the NGINX Controller auth token\n      include_role:\n        name: nginxinc.nginx_controller_generate_token\n\n    - name: Configure the component\n      include_role:\n        name: nginxinc.nginx_controller_component\n      vars:\n        nginx_controller_environmentName: &quot;production-us-west&quot;\n        nginx_controller_appName: &quot;lending.acmefinancial.net&quot;\n        nginx_controller_component:\n          metadata:\n            name: lending\n            displayName: &quot;Shared Public Lending BU Gateway&quot;\n            description: &quot;Routes all non special Lending applications&quot;\n          desiredState:\n            ingress:\n              uris:\n                &quot;/&quot;:\n                  {} # use defaults\n                &quot;/jokes/random&quot;:\n                  matchMethod: PREFIX\n              gatewayRefs:\n                - ref: &quot;/services/environments/production-us-west/gateways/lending&quot;\n            backend:\n              workloadGroups:\n                group1:\n                  uris:\n                    &quot;http://10.1.10.11:8121&quot;:\n                      isDown: true\n                    &quot;http://10.1.10.12:8121&quot;:\n                      {} # use defaults\n                    &quot;http://10.1.10.11:5821&quot;:\n                      {} # use defaults\n                    &quot;http://10.1.10.12:5821&quot;:\n                      failTimeout: 10s\n                  loadBalancingMethod:\n                    type: ROUND_ROBIN\n              monitoring:\n                response:\n                  status:\n                    range:\n                      startCode: 200\n                      endCode: 201\n                    match: true\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_component.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_component.yaml -e \"nginx_controller_user_email=user@company.com nginx_controller_user_password=notsecure nginx_controller_fqdn=controller.example.local nginx_controller_validate_certs=false\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_component.yaml -e \"@nginx_controller_component_vars.yaml\"</code></p>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p><a href=\"https://github.com/alessfg\">Alessandro Fael Garcia</a></p>\n<p><a href=\"https://github.com/aknot242\">Daniel Edgar</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2020</p>"
        },
        {
            "content_name": "nginx_controller_certificate",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller Certificate</h1>\n<p>Upsert (create and update) certificates to NGINX Controller for use with Gateways and Components.</p>\n<h2>Requirements</h2>\n<p><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a></p>\n<h2>Role Variables</h2>\n<h3>Required Variables</h3>\n<p><code>controller.fqdn</code> - The hostname or DNS of the NGINX Controller instance.</p>\n<p><code>controller.auth_token</code> - An authentication token for the NGINX Controller API (the nginx_controller_generate_token role outputs this).</p>\n<p><code>environmentName</code> - The Environment the certificate is being managed within.</p>\n<p><code>certificate.metadata.name</code> - Name of the certificate</p>\n<p><code>certificate.desiredState.type</code> - Type of the certificate. Can be PEM | PKCS12 | RemoteFile.</p>\n<h3>Template Variables</h3>\n<p>This role has multiple template related variables. The descriptions and defaults for all these variables can be found in <strong><a href=\"./vars/main.yml\">vars/main.yml</a></strong></p>\n<h2>Dependencies</h2>\n<h2>Example Playbook</h2>\n<p>To use this role you can create a playbook such as the following (let's name it <code>nginx_controller_certificate.yaml</code> for the purposes of this example).</p>\n<pre><code>- hosts: localhost\n  gather_facts: no\n  vars:\n    nginx_controller_user_email: &quot;user@example.com&quot;\n    nginx_controller_user_password: &quot;mySecurePassword&quot;\n    nginx_controller_fqdn: &quot;controller.mydomain.com&quot;\n    nginx_controller_validate_certs: false\n\n  tasks:\n    - name: Retrieve the NGINX Controller auth token\n      include_role:\n        name: nginxinc.nginx_controller_generate_token\n\n    - name: Create the certificate object\n      include_role:\n        name: nginxinc.nginx_controller_certificate\n      vars:\n        # nginx_controller_auth_token: output by previous role in example\n        nginx_controller_environmentName: &quot;production-us-west&quot;\n        nginx_controller_certificate:\n          metadata:\n            name: &quot;www.example.com&quot;\n            displayName: &quot;Root WWW Cert&quot;\n            description: &quot;A certificate&quot;\n          desiredState:\n            type: &quot;PEM&quot;\n            privateKey: |-\n              # Contents of cert key as a multiline, unquoted string\n            publicCert: |-\n              # Contents of cert as a multiline, unquoted string\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_certificate.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_certificate.yaml -e \"nginx_controller_user_email=user@company.com nginx_controller_user_password=notsecure nginx_controller_fqdn=controller.example.local nginx_controller_validate_certs=false\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_certificate.yaml -e \"@nginx_controller_certificate_vars.yaml\"</code></p>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p><a href=\"https://github.com/alessfg\">Alessandro Fael Garcia</a></p>\n<p><a href=\"https://github.com/aknot242\">Daniel Edgar</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2020</p>"
        },
        {
            "content_name": "nginx_controller_application",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller Application</h1>\n<p>Define an application with NGINX Controller to hold components that describe the behavior to the upstream workload group(s).</p>\n<h2>Requirements</h2>\n<p><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a></p>\n<h2>Role Variables</h2>\n<h3>Required Variables</h3>\n<p><code>controller.fqdn</code> - FQDN of the NGINX Controller instance</p>\n<p><code>controller.auth_token</code> - Authentication token for NGINX Controller</p>\n<p><code>environmentName</code> - Environment the component is associated with</p>\n<p><code>application.metadata.name</code> -  Name of the application</p>\n<h3>Template Variables</h3>\n<p>This role has multiple template related variables. The descriptions and defaults for all these variables can be found in <strong><a href=\"./vars/main.yml\">vars/main.yml</a></strong></p>\n<h2>Dependencies</h2>\n<h2>Example Playbook</h2>\n<p>To use this role you can create a playbook such as the following (let's name it <code>nginx_controller_application.yaml</code> for the purposes of this example).</p>\n<pre><code>- hosts: localhost\n  gather_facts: no\n\n  vars:\n    nginx_controller_user_email: &quot;user@example.com&quot;\n    nginx_controller_user_password: &quot;mySecurePassword&quot;\n    nginx_controller_fqdn: &quot;controller.mydomain.com&quot;\n    nginx_controller_validate_certs: false\n\n  tasks:\n    - name: Retrieve the NGINX Controller auth token\n      include_role:\n        name: nginxinc.nginx_controller_generate_token\n\n    - name: Configure the application\n      include_role:\n        name: nginxinc.nginx_controller_application\n      vars:\n        nginx_controller_environmentName: &quot;production-us-west&quot;\n        nginx_controller_app:\n          metadata:\n            name: &quot;trading.acmefinancial.net&quot;\n            displayName: &quot;Trading.ACMEFinancial.net&quot;\n            description: &quot;Core Trading Application&quot;\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_application.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_application.yaml -e \"nginx_controller_user_email=user@company.com nginx_controller_user_password=notsecure nginx_controller_fqdn=controller.example.local nginx_controller_validate_certs=false\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_application.yaml -e \"@nginx_controller_application_vars.yaml\"</code></p>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2020</p>"
        },
        {
            "content_name": "nginx_controller_agent",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>NGINX Controller Agent</h1>\n<p>This Role installs, configures, and upgrades the NGINX Controller agent alongside an NGINX Plus instance in a machine.</p>\n<h2>Requirements</h2>\n<ul>\n<li><a href=\"https://www.nginx.com/products/nginx/\">NGINX Plus</a></li>\n<li><a href=\"https://www.nginx.com/products/nginx-controller/\">NGINX Controller</a></li>\n</ul>\n<h2>Role Variables</h2>\n<h3>Required Variables</h3>\n<p><code>nginx_controller_fqdn</code> - FQDN of the NGINX Controller instance</p>\n<p><code>nginx_controller_api_key</code> - The API key used to authenticate to NGINX Controller.</p>\n<h3>Optional Variables</h3>\n<p><code>nginx_controller_hostname</code> - The name of the NGINX instance as reflected in NGINX Controller. Must be unique per instance.  (currently redundant with nginx_controller_instance_name)</p>\n<p><code>nginx_controller_location</code> - The location in NGINX Controller this instance will be automatically added to. Otherwise the location will be 'unspecified' in NGINX Controller.</p>\n<p><code>nginx_controller_instance_name</code> - The name of the instance as reflected in Controller. Must be unique per instance.</p>\n<h2>Dependencies</h2>\n<h2>Example Playbook</h2>\n<p>To use this role you can create a playbook such as the following:</p>\n<pre><code>---\n- hosts: localhost\n  gather_facts: false\n  connection: local\n\n  vars:\n    nginx_controller_user_email: &quot;user@example.com&quot;\n    nginx_controller_user_password: &quot;mySecurePassword&quot;\n    nginx_controller_fqdn: &quot;controller.mydomain.com&quot;\n    nginx_controller_validate_certs: false\n\n  tasks:\n  - include_role:\n      name: nginxinc.nginx_controller.nginx_controller_generate_token\n\n  - name: Get controller api key for agent registration\n    uri:\n      url: &quot;https://{{ nginx_controller_fqdn }}/api/v1/platform/global&quot;\n      method: &quot;GET&quot;\n      return_content: yes\n      status_code: 200\n      validate_certs: false\n      headers:\n        Cookie: &quot;{{nginx_controller_auth_token}}&quot;\n    register: ctrl_globals\n\n  - name: Copy api_key to a variable\n    set_fact:\n      api_key: &quot;{{ctrl_globals.json.currentStatus.agentSettings.apiKey}}&quot;\n\n- hosts: tag_new_gateway\n  remote_user: ubuntu\n  become: true\n  become_method: sudo\n  gather_facts: yes\n\n  tasks:\n  - name: install minimal support for python2 for Agent install script\n    apt:\n      name: &quot;{{ packages }}&quot;\n      state: present\n    vars:\n      packages:\n      - python-minimal\n      - libxerces-c3.2\n\n  - name: install the agent\n    include_role:\n      name: nginxinc.nginx_controller.nginx_controller_agent\n    vars:\n      nginx_controller_api_key: &quot;{{ hostvars['localhost']['api_key'] }}&quot;\n</code></pre>\n\n<p>You can then run <code>ansible-playbook nginx_controller_agent.yaml</code> to execute the playbook.</p>\n<p>Alternatively, you can also pass/override any variables at run time using the <code>--extra-vars</code> or <code>-e</code> flag like so <code>ansible-playbook nginx_controller_agent.yaml -e \"nginx_controller_user_email=user@company.com nginx_controller_user_password=notsecure nginx_controller_fqdn=controller.example.local nginx_controller_validate_certs=false\"</code></p>\n<p>You can also pass/override any variables by passing a <code>yaml</code> file containing any number of variables like so <code>ansible-playbook nginx_controller_agent.yaml -e \"@nginx_controller_agent_vars.yaml\"</code></p>\n<h2>License</h2>\n<p><a href=\"./LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/brianehlert\">Brian Ehlert</a></p>\n<p><a href=\"https://github.com/alessfg\">Alessandro Fael Garcia</a></p>\n<p><a href=\"https://github.com/aknot242\">Daniel Edgar</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2020</p>"
        },
        {
            "content_name": "nginx",
            "content_type": "role",
            "doc_strings": {},
            "readme_file": "README.md",
            "readme_html": "<h1>Ansible NGINX Role</h1>\n<p><a href=\"https://galaxy.ansible.com/nginxinc/nginx\"><img alt=\"Ansible Galaxy\" src=\"https://img.shields.io/badge/galaxy-nginxinc.nginx-5bbdbf.svg\"></a>\n<a href=\"https://travis-ci.org/nginxinc/ansible-role-nginx\"><img alt=\"Build Status\" src=\"https://travis-ci.org/nginxinc/ansible-role-nginx.svg?branch=master\"></a></p>\n<p>This role installs NGINX Open Source, NGINX Plus, the NGINX Amplify agent, or NGINX Unit on your target host.</p>\n<p><strong>Note:</strong> This role is still in active development. There may be unidentified issues and the role variables may change as development continues.</p>\n<h2>Requirements</h2>\n<p><strong>Ansible</strong></p>\n<p>This role was developed and tested with <a href=\"https://docs.ansible.com/ansible/latest/reference_appendices/release_and_maintenance.html#release-status\">maintained</a> versions of Ansible. Backwards compatibility is not guaranteed.</p>\n<p>Instructions on how to install Ansible can be found in the <a href=\"https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html\">Ansible website</a>.</p>\n<p><strong>Molecule</strong></p>\n<p>Molecule is used to test the various functionailities of the role. Instructions on how to install Molecule can be found in the <a href=\"https://molecule.readthedocs.io/en/latest/installation.html\">Molecule website</a>.</p>\n<h2>Installation</h2>\n<p><strong>Ansible Galaxy</strong></p>\n<p>Use <code>ansible-galaxy install nginxinc.nginx</code> to install the latest stable release of the role on your system.</p>\n<p><strong>Git</strong></p>\n<p>Use <code>git clone https://github.com/nginxinc/ansible-role-nginx.git</code> to pull the latest edge commit of the role from GitHub.</p>\n<h2>Platforms</h2>\n<p>The NGINX Ansible role supports all platforms supported by <a href=\"https://nginx.org/en/linux_packages.html#mainline\">NGINX Open Source</a>, <a href=\"https://www.nginx.com/products/technical-specs/\">NGINX Plus</a>, the <a href=\"https://github.com/nginxinc/nginx-amplify-doc/blob/master/amplify-faq.md#21-what-operating-systems-are-supported\">NGINX Amplify agent</a>, and <a href=\"https://unit.nginx.org/installation/#official-packages\">NGINX Unit</a>:</p>\n<p><strong>NGINX Open Source</strong></p>\n<pre><code>Alpine:\n  versions:\n    - 3.8\n    - 3.9\n    - 3.10\n    - 3.11\nCentOS:\n  versions:\n    - 6\n    - 7\n    - 8\nDebian:\n  versions:\n    - stretch\n    - buster\nFreeBSD:\n  versions:\n    - 11.2+\n    - 12\nRedHat:\n  versions:\n    - 6\n    - 7.4+\n    - 8\nSUSE/SLES:\n  versions:\n    - 12\n    - 15\nUbuntu:\n  versions:\n    - xenial\n    - bionic\n</code></pre>\n\n<p><strong>NGINX Plus</strong></p>\n<pre><code>Alpine:\n  versions:\n    - 3.8\n    - 3.9\n    - 3.10\n    - 3.11\nAmazon Linux:\n  versions:\n    - 2018.03\nAmazon Linux 2:\n  versions:\n    - LTS\nCentOS:\n  versions:\n    - 6.5+\n    - 7.4+\n    - 8\nDebian:\n  versions:\n    - stretch\n    - buster\nFreeBSD:\n  versions:\n    - 11.2+\n    - 12\nOracle Linux:\n  versions:\n    - 6.5+\n    - 7.4+\nRedHat:\n  versions:\n    - 6.5+\n    - 7.4+\n    - 8\nSUSE/SLES:\n  versions:\n    - 12\n    - 15\nUbuntu:\n  versions:\n    - xenial\n    - bionic\n</code></pre>\n\n<p><strong>NGINX Amplify Agent</strong></p>\n<pre><code>Amazon Linux:\n  versions:\n    - 2017.09\nCentOS:\n  versions:\n    - 6\n    - 7\nDebian:\n  versions:\n    - jessie\n    - stretch\nUbuntu:\n  versions:\n    - xenial\n    - bionic\nRedHat:\n  versions:\n    - 6\n    - 7\n</code></pre>\n\n<p><strong>NGINX Unit</strong></p>\n<pre><code>CentOS:\n  versions:\n    - 6\n    - 7\nRedHat:\n  versions:\n    - 6\n    - 7\nDebian:\n  versions:\n    - jessie\n    - stretch\n    - buster\nUbuntu:\n  versions:\n    - xenial\n    - bionic\nAmazon Linux:\n  versions:\n    - 2018.03\nAmazon Linux 2:\n  versions:\n    - 2\nFreeBSD:\n  versions:\n    - 10\n    - 11\n</code></pre>\n\n<h2>Role Variables</h2>\n<p>This role has multiple variables. The descriptions and defaults for all these variables can be found in the directory <strong><code>defaults/main</code></strong> in the following files:</p>\n<ul>\n<li><strong><a href=\"./defaults/main/main.yml\">defaults/main/main.yml</a>:</strong> NGINX installation variables</li>\n<li><strong><a href=\"./defaults/main/amplify.yml\">defaults/main/amplify.yml</a>:</strong> NGINX Amplify agent installation variables</li>\n<li><strong><a href=\"./defaults/main/template.yml\">defaults/main/template.yml</a>:</strong> NGINX configuration templating variables</li>\n<li><strong><a href=\"./defaults/main/upload.yml\">defaults/main/upload.yml</a>:</strong> NGINX configuration/HTML/SSL upload variables</li>\n<li><strong><a href=\"./defaults/main/linux.yml\">defaults/main/linux.yml</a>:</strong> Linux installation variables</li>\n<li><strong><a href=\"./defaults/main/bsd.yml\">defaults/main/bsd.yml</a>:</strong> BSD installation variables</li>\n<li><strong><a href=\"./defaults/main/unit.yml\">defaults/main/unit.yml</a>:</strong> NGINX Unit installation variables</li>\n</ul>\n<h2>Dependencies</h2>\n<p>None</p>\n<h2>Example Playbook</h2>\n<p>This is a sample playbook file for deploying the Ansible Galaxy NGINX role in a localhost and installing the open source version of NGINX.</p>\n<pre><code>---\n- hosts: localhost\n  become: true\n  roles:\n    - role: nginxinc.nginx\n</code></pre>\n\n<p>This is a sample playbook file for deploying the Ansible Galaxy NGINX role to a dynamic inventory containing the <code>nginx</code> tag.</p>\n<pre><code>---\n- hosts: tag_nginx\n  remote_user: root\n  roles:\n    - role: nginxinc.nginx\n</code></pre>\n\n<p>This is a sample playbook file for deploying the Ansible Galaxy NGINX role in a localhost and installing the open source version of NGINX as a simple web server.</p>\n<pre><code>---\n- hosts: localhost\n  become: true\n  roles:\n    - role: nginxinc.nginx\n  vars:\n    nginx_http_template_enable: true\n    nginx_http_template:\n      default:\n        template_file: http/default.conf.j2\n        conf_file_name: default.conf\n        conf_file_location: /etc/nginx/conf.d/\n        servers:\n          server1:\n            listen:\n              listen_localhost:\n                # ip: 0.0.0.0\n                port: 80\n            server_name: localhost\n            error_page: /usr/share/nginx/html\n            autoindex: false\n            web_server:\n              locations:\n                default:\n                  location: /\n                  html_file_location: /usr/share/nginx/html\n                  html_file_name: index.html\n                  autoindex: false\n              http_demo_conf: false\n</code></pre>\n\n<p>This is a sample playbook file for deploying the Ansible Galaxy NGINX role in a localhost and installing the open source version of NGINX as a reverse proxy.</p>\n<pre><code>---\n- hosts: localhost\n  become: true\n  roles:\n    - role: nginxinc.nginx\n  vars:\n    nginx_http_template_enable: true\n    nginx_http_template:\n      default:\n        template_file: http/default.conf.j2\n        conf_file_name: default.conf\n        conf_file_location: /etc/nginx/conf.d/\n        servers:\n          server1:\n            listen:\n              listen_localhost:\n                # ip: 0.0.0.0\n                port: 80\n                opts:\n                  - default_server\n            server_name: localhost\n            error_page: /usr/share/nginx/html\n            autoindex: false\n            reverse_proxy:\n              locations:\n                frontend:\n                  location: /\n                  proxy_pass: http://frontend_servers\n                backend:\n                  location: /backend\n                  proxy_pass: http://backend_servers\n        upstreams:\n          upstream_1:\n            name: frontend_servers\n            lb_method: least_conn\n            zone_name: frontend\n            zone_size: 64k\n            sticky_cookie: false\n            servers:\n              frontend_server_1:\n                address: 0.0.0.0\n                port: 8081\n                weight: 1\n                health_check: max_fails=3 fail_timeout=5s\n          upstream_2:\n            name: backend_servers\n            lb_method: least_conn\n            zone_name: backend\n            zone_size: 64k\n            sticky_cookie: false\n            servers:\n              backend_server_1:\n                address: 0.0.0.0\n                port: 8082\n                weight: 1\n                health_check: max_fails=3 fail_timeout=5s\n      frontend:\n        template_file: http/default.conf.j2\n        conf_file_name: frontend_default.conf\n        conf_file_location: /etc/nginx/conf.d/\n        servers:\n          server1:\n            listen:\n              listen_localhost:\n                ip: 0.0.0.0\n                port: 8081\n                ssl: false\n                opts: []\n            server_name: localhost\n            error_page: /usr/share/nginx/html\n            autoindex: false\n            web_server:\n              locations:\n                frontend_site:\n                  location: /\n                  proxy_hide_headers:\n                    - X-Powered-By\n                  html_file_location: /usr/share/nginx/html\n                  html_file_name: index.html\n                  autoindex: false\n              http_demo_conf: false\n      backend:\n        template_file: http/default.conf.j2\n        conf_file_name: backend_default.conf\n        conf_file_location: /etc/nginx/conf.d/\n        servers:\n          server1:\n            listen:\n              listen_localhost:\n                ip: 0.0.0.0\n                port: 8082\n                ssl: false\n                opts: []\n            server_name: localhost\n            error_page: /usr/share/nginx/html\n            autoindex: false\n            web_server:\n              locations:\n                backend_site:\n                  location: /\n                  html_file_location: /usr/share/nginx/html\n                  html_file_name: index.html\n                  autoindex: false\n              http_demo_conf: false\n</code></pre>\n\n<p>This is a sample playbook file for deploying the Ansible Galaxy NGINX role in a localhost and installing NGINX Plus.</p>\n<pre><code>---\n- hosts: localhost\n  become: true\n  roles:\n    - role: nginxinc.nginx\n  vars:\n    nginx_type: plus\n</code></pre>\n\n<p>This is a sample playbook file for deploying the Ansible Galaxy NGINX role in a localhost to install NGINX Unit and the PHP/Perl NGINX Unit language modules.</p>\n<pre><code>---\n- hosts: localhost\n  become: true\n  roles:\n    - role: nginxinc.nginx\n  vars:\n    nginx_enable: false\n    nginx_unit_enable: true\n    nginx_unit_modules:\n      - unit-php\n      - unit-perl\n</code></pre>\n\n<p>To run any of the above sample playbooks create a <code>setup-nginx.yml</code> file and paste the contents. Executing the Ansible Playbook is then as simple as executing <code>ansible-playbook setup-nginx.yml</code>.</p>\n<p>Alternatively, you can also clone this repository instead of installing it from Ansible Galaxy. If you decide to do so, replace the role variable in the previous sample playbooks from <code>nginxinc.nginx</code> to <code>ansible-role-nginx</code>.</p>\n<h2>Other NGINX Roles</h2>\n<p>You can find an Ansible collection of roles to help you install and configure NGINX Controller <a href=\"https://github.com/nginxinc/ansible-collection-nginx_controller\">here</a></p>\n<h2>License</h2>\n<p><a href=\"https://github.com/nginxinc/ansible-role-nginx/blob/master/LICENSE\">Apache License, Version 2.0</a></p>\n<h2>Author Information</h2>\n<p><a href=\"https://github.com/alessfg\">Alessandro Fael Garcia</a></p>\n<p><a href=\"https://github.com/gdzien\">Grzegorz Dzien</a></p>\n<p>&copy; <a href=\"https://www.nginx.com/\">NGINX, Inc.</a> 2018 - 2020</p>"
        }
    ]
}