<p>=============================================================</p>
<p>netapp.ontap</p>
<p>NetApp ONTAP Collection</p>
<p>Copyright (c) 2019 NetApp, Inc. All rights reserved.
 Specifications subject to change without notice.</p>
<p>=============================================================</p>
<h1>Installation</h1>
<pre><code>ansible-galaxy collection install netapp.ontap
</code></pre>

<p>To use Collection add the following to the top of your playbook, with out this you will be using Ansible 2.9 version of the module</p>
<pre><code>collections:
  - netapp.ontap
</code></pre>

<h1>Need help</h1>
<p>Join our Slack Channel at <a href="http://netapp.io/slack">Netapp.io</a></p>
<h1>Release Notes</h1>
<h2>20.2.0</h2>
<h3>New Modules</h3>
<ul>
<li>na_ontap_volume_snaplock: modify volume snaplock retention.</li>
</ul>
<h3>New Options</h3>
<ul>
<li>na_ontap_info: New info's added <code>snapshot_info</code></li>
<li>na_ontap_info: <code>max_records</code> option to set maximum number of records to return per subset.</li>
<li>na_ontap_snapmirror: <code>relationship_state</code> option for breaking the snapmirror relationship.</li>
<li>na_ontap_snapmirror: <code>update_snapmirror</code> option for updating the snapmirror relationship.</li>
<li>na_ontap_volume_clone: <code>split</code> option to split clone volume from parent volume.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>na_ontap_cifs_server: Fixed KeyError exception on 'cifs_server_name'</li>
<li>na_ontap_command: fixed traceback when using return_dict if u'1' is present in result value.</li>
<li>na_ontap_login_messages: Fixed example documentation and spelling mistake issue</li>
<li>na_ontap_nvme_subsystem: fixed bug when creating subsystem, vserver was not filtered.</li>
<li>na_ontap_svm: if snapshot policy is changed, modify fails with "Extra input: snapshot_policy"</li>
<li>na_ontap_svm: if language: C.UTF-8 is specified, the module is not idempotent</li>
<li>na_ontap_volume_clone: fixed 'Extra input: parent-vserver' error when running as cluster admin.</li>
<li>na_ontap_qtree: Fixed issue with Get function for REST</li>
</ul>
<h3>Role Changes</h3>
<ul>
<li>na_ontap_nas_create role: fix typo in README file, add CIFS example.</li>
</ul>
<h2>20.1.0</h2>
<h3>New Modules</h3>
<ul>
<li>na_ontap_login_messages: create/modify/delete security login messages including banner and mtod.</li>
</ul>
<h3>New Options</h3>
<ul>
<li>na_ontap_aggregate: add <code>snaplock_type</code>.</li>
<li>na_ontap_info: New info's added <code>cifs_server_info</code>, <code>cifs_share_info</code>, <code>cifs_vserver_security_info</code>, <code>cluster_peer_info</code>, <code>clock_info</code>, <code>export_policy_info</code>, <code>export_rule_info</code>, <code>fcp_adapter_info</code>, <code>fcp_alias_info</code>, <code>fcp_service_info</code>, <code>job_schedule_cron_info</code>, <code>kerberos_realm_info</code>, <code>ldap_client</code>, <code>ldap_config</code>, <code>net_failover_group_info</code>, <code>net_firewall_info</code>, <code>net_ipspaces_info</code>, <code>net_port_broadcast_domain_info</code>, <code>net_routes_info</code>, <code>net_vlan_info</code>, <code>nfs_info</code>, <code>ntfs_dacl_info</code>, <code>ntfs_sd_info</code>, <code>ntp_server_info</code>, <code>role_info</code>, <code>service_processor_network_info</code>, <code>sis_policy_info</code>, <code>snapmirror_policy_info</code>, <code>snapshot_policy_info</code>, <code>vscan_info</code>, <code>vserver_peer_info</code></li>
<li>na_ontap_igroup_initiator: <code>force_remove</code> to forcibly remove initiators from an igroup that is currently mapped to a LUN.</li>
<li>na_ontap_interface: <code>failover_group</code> to specify the failover group for the LIF. <code>is_ipv4_link_local</code> to specify the LIF's are to acquire a ipv4 link local address.</li>
<li>na_ontap_rest_cli: add OPTIONS as a supported verb and return list of allowed verbs.</li>
<li>na_ontap_volume: add <code>group_id</code> and <code>user_id</code>.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>na_ontap_aggregate: Fixed traceback when running as vsadmin and cleanly error out.</li>
<li>na_ontap_command: stdout_lines_filter contains data only if include/exlude_lines parameter is used. (zeten30)</li>
<li>na_ontap_command: stripped_line len is checked only once, filters are inside if block. (zeten30)</li>
<li>na_ontap_interface: allow module to run on node before joining the cluster.</li>
<li>na_ontap_net_ifgrp: Fixed error for na_ontap_net_ifgrp if no port is given.</li>
<li>na_ontap_snapmirror: Fixed traceback when running as vsadmin.  Do not attempt to break a relationship that is 'Uninitialized'.</li>
<li>na_ontap_snapshot_policy: Fixed KeyError: 'prefix' bug when prefix parameter isn't supplied.</li>
<li>na_ontap_volume: Fixed error reporting if efficiency policy cannot be read.  Do not attempt to read efficiency policy if not needed.</li>
<li>na_ontap_volume: Fixed error when modifying volume efficiency policy.</li>
<li>na_ontap_volume_clone: Fixed KeyError exception on 'volume'</li>
</ul>
<h3>Added REST support to existing modules</h3>
<ul>
<li>na_ontap_dns: added REST support for dns creation and modification on cluster vserver.</li>
</ul>
<h3>Role Changes</h3>
<h2>19.11.0</h2>
<h3>New Modules</h3>
<ul>
<li>na_ontap_quota_policy: create/rename/delete quota policy.</li>
</ul>
<h3>New Options</h3>
<ul>
<li>na_ontap_cluster: added single node cluster option, also now supports for modify cluster contact and location option.</li>
<li>na_ontap_info: Now allow you use to VSadmin to get info (Must user <code>vserver</code> option).</li>
<li>na_ontap_info: Added <code>vscan_status_info</code>, <code>vscan_scanner_pool_info</code>, <code>vscan_connection_status_all_info</code>, <code>vscan_connection_extended_stats_info</code></li>
<li>na_ontap_efficiency_policy: <code>changelog_threshold_percent</code> to set the percentage at which the changelog will be processed for a threshold type of policy, tested once each hour.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>na_ontap_cluster: autosupport log pushed after cluster create is performed, removed license add or remove option.</li>
<li>na_ontap_dns: report error if modify or delete operations are attempted on cserver when using REST.  Make create operation idempotent for cserver when using REST.  Support for modify/delete on cserver when using REST will be added later.</li>
<li>na_ontap_firewall_policy: portmap added as a valid service</li>
<li>na_ontap_net_routes: REST does not support the 'metric' attribute</li>
<li>na_ontap_snapmirror: added initialize boolean option which specifies whether to initialize SnapMirror relation.</li>
<li>na_ontap_volume: fixed error when deleting flexGroup volume with ONTAP 9.7.</li>
<li>na_ontap_volume: tiering option requires 9.4 or later (error on volume-comp-aggr-attributes)</li>
<li>na_ontap_vscan_scanner_pool: fix module only gets one scanner pool.</li>
</ul>
<h3>Added REST support to existing modules</h3>
<h3>Role Changes</h3>
<h2>19.10.0</h2>
<p>Changes in 19.10.0 and September collection releases compared to Ansible 2.9</p>
<h3>New Modules</h3>
<ul>
<li>na_ontap_name_service_switch: create/modify/delete name service switch configuration.</li>
<li>na_ontap_iscsi_security: create/modify/delete iscsi security.</li>
</ul>
<h3>New Options</h3>
<ul>
<li>na_ontap_command: <code>vserver</code>: to allow command to run as either cluster admin or vserver admin.  To run as vserver admin you must use the vserver option.</li>
<li>na_ontap_motd: rename <code>message</code> to <code>motd_message</code> to avoid conflict with Ansible internal variable name.</li>
<li>na_ontap_nvme_namespace: <code>size_unit</code> to specify size in different units.</li>
<li>na_ontap_snapshot_policy: <code>prefix</code>: option to use for creating snapshot policy.</li>
</ul>
<h3>Bug Fixes</h3>
<ul>
<li>na_ontap_ndmp: minor documentation changes for restore_vm_cache_size and data_port_range.</li>
<li>na_ontap_qtree: REST API takes "unix_permissions" as parameter instead of "mode".</li>
<li>na_ontap_qtree: unix permission is not available when security style is ntfs</li>
<li>na_ontap_user: minor documentation update for application parameter.</li>
<li>na_ontap_volume: <code>efficiency_policy</code> was ignored</li>
<li>na_ontap_volume: enforce that space_slo and space_guarantee are mutually exclusive</li>
<li>na_ontap_svm: "allowed_protocols" added to param in proper way in case of using REST API</li>
<li>na_ontap_firewall_policy: documentation changed for supported service parameter.</li>
<li>na_ontap_net_subnet: fix ip_ranges option fails on existing subnet.</li>
<li>na_ontap_snapshot_policy: fix vsadmin approach for managing snapshot policy.</li>
<li>na_ontap_nvme_subsystem: fix fetching unique nvme subsytem based on vserver filter.</li>
<li>na ontap_net_routes: change metric type from string to int.</li>
<li>na_ontap_cifs_server: minor documentation changes correction of create example with "name" parameter and adding type to parameters.</li>
<li>na_ontap_vserver_cifs_security: fix int and boolean options when modifying vserver cifs security.</li>
<li>na_ontap_net_subnet: fix rename idempotency issue and updated rename check.</li>
</ul>
<h3>Added REST support to existing modules</h3>
<p>By default, the module will use REST if the target system supports it, and the options are supported.  Otherwise, it will switch back to ZAPI.  This behavior can be controlled with the <code>use_rest</code> option:
1. Always: to force REST.  The module fails and reports an error if REST cannot be used.
1. Never: to force ZAPI.  This could be useful if you find some incompatibility with REST, or want to confirm the behavior is identical between REST and ZAPI.
1. Auto: the default, as described above.</p>
<ul>
<li>na_ontap_ipspace</li>
<li>na_ontap_export_policy</li>
<li>na_ontap_ndmp
-- Note: only <code>enable</code> and <code>authtype</code> are supported with REST</li>
<li>na_ontap_net_routes</li>
<li>na_ontap_qtree
-- Note: <code>oplocks</code> is not supported with REST, defaults to enable.</li>
<li>na_ontap_svm
-- Note: <code>root_volume</code>, <code>root_volume_aggregate</code>, <code>root_volume_security_style</code> are not supported with REST.</li>
<li>na_ontap_job_schedule</li>
</ul>
<h3>Role Changes</h3>
<ul>
<li>na_ontap_cluster_config updated to all cleaner playbook</li>
<li>na_ontap_vserver_create updated to all cleaner playbook</li>
<li>na_ontap_nas_create updated to all cleaner playbook</li>
<li>na_ontap_san_create updated to all cleaner playbook</li>
</ul>